(this["webpackJsonpvideo-segmentation-in-browser-ai"]=this["webpackJsonpvideo-segmentation-in-browser-ai"]||[]).push([[0],{135:function(e,t,n){},136:function(e,t,n){},166:function(e,t){},168:function(e,t){},290:function(e,t,n){"use strict";n.r(t);var a,c,o=n(0),i=n.n(o),r=n(127),s=n.n(r),u=(n(135),n(136),n(2)),f=n(16),h=n(28),g=n(75),d=n(128),b=n(30),l=n(41),j={id:"123",modelPath:"https://huggingface.co/visheratin/segformer-b0-finetuned-ade-512-512/resolve/main/b0.onnx.gz",configPath:"https://huggingface.co/visheratin/segformer-b0-finetuned-ade-512-512/resolve/main/config.json",preprocessorPath:"https://huggingface.co/visheratin/segformer-b0-finetuned-ade-512-512/resolve/main/preprocessor_config.json"},v=l.a.div({display:"flex"}),p=Object(l.a)("img")(a||(a=Object(g.a)(["\n  width: ","px;\n  height: ","px;\n  position: absolute;\n"])),(function(e){return e.width}),(function(e){return e.height})),O=Object(l.a)(p)({opacity:.5}),m=(Object(l.a)("canvas")(c||(c=Object(g.a)(["\n  width: ",";\n  height: ",";\n  left: 0;\n  top: 0;\n  opacity: 0.5;\n  position: absolute;\n"])),(function(e){return e.width}),(function(e){return e.height})),function(){var e=Object(o.useState)(),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(0),i=Object(h.a)(c,2),r=i[0],s=i[1],g=Object(o.useState)(0),l=Object(h.a)(g,2),p=l[0],m=l[1],w=Object(o.useRef)(null),x=Object(o.useState)(),y=Object(h.a)(x,2),P=y[0],k=y[1],S=Object(o.useState)(),M=Object(h.a)(S,2),E=M[0],I=M[1],L=Object(o.useState)(),R=Object(h.a)(L,2),U=(R[0],R[1]);Object(o.useEffect)((function(){C();var e=function(){var e=Object(f.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new d.SegmentationModel(j),e.next=3,t.init();case 3:t&&a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(o.useEffect)((function(){s(.6*window.innerWidth),m(.45*window.innerWidth)}),[]),Object(o.useEffect)((function(){var e=setInterval((function(){var e={audio:!1,video:{width:r,height:p,facingMode:"user"}};navigator.mediaDevices.getUserMedia(e).then((function(e){var t=e.getVideoTracks()[0];new ImageCapture(t).takePhoto().then((function(e){console.log("Took photo:",e);var t=URL.createObjectURL(e);I(t)})).catch((function(e){console.error("takePhoto() error: ",e)}))})).catch((function(e){console.log(e.message)}))}),1e3);U(e)}),[]),Object(o.useEffect)((function(){var e=function(){var e=Object(f.a)(Object(u.a)().mark((function e(){var t,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!E){e.next=8;break}return console.log("frame data url",E),e.next=4,n.process(E);case 4:t=e.sent,console.log(t),a=t.canvas.toDataURL("image/png"),k(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[E]);var C=function(){var e={audio:!1,video:{width:r,height:p,facingMode:"user"}};navigator.mediaDevices.getUserMedia(e).then((function(e){var t=w.current;t&&(t.srcObject=e,t.onloadedmetadata=function(){t.play()})})).catch((function(e){console.log(e.message)}))};return Object(b.a)(v,null,Object(b.a)("video",{width:"60%",height:"",ref:w,playsInline:!0,autoPlay:!0,onPlay:function(){console.log("onPlay")}}),Object(b.a)(O,{src:P,width:r,height:p}))}),w=n(31);var x=function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(m,{})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,291)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};s.a.createRoot(document.getElementById("root")).render(Object(w.jsx)(i.a.StrictMode,{children:Object(w.jsx)(x,{})})),y()}},[[290,1,2]]]);
//# sourceMappingURL=main.ede11388.chunk.js.map